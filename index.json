{"repository_name":"prometheus","body":"# Prometheus Client for Crystal\n\nA [Prometheus](https://prometheus.io) client library for Crystal following the [official guidelines](https://prometheus.io/docs/instrumenting/writing_clientlibs/).\n\n## Installation\n\n1. Add the dependency to your `shard.yml`:\n\n```yaml\ndependencies:\n  prometheus:\n    github: pfeifferj/prometheus\n    version: ~> 0.1.0\n```\n\n2. Run `shards install`\n\n## Usage\n\n```crystal\nrequire \"prometheus\"\n\n# Create metrics\ncounter = Prometheus.counter(\"http_requests_total\", \"Total HTTP requests\")\ngauge = Prometheus.gauge(\"cpu_usage\", \"CPU usage percentage\")\nhistogram = Prometheus.histogram(\"response_time\", \"Response time in seconds\", [0.1, 0.5, 1.0])\nsummary = Prometheus.summary(\"request_size\", \"Request size in bytes\")\n\n# Add labels\nlabels = Prometheus::LabelSet.new({\n  \"method\" => \"GET\",\n  \"handler\" => \"home\"\n})\nrequests = Prometheus.counter(\"http_requests_total\", \"Total HTTP requests\", labels)\n\n# Use metrics\ncounter.inc                 # Increment by 1\ncounter.inc(5)              # Increment by given value\ngauge.set(45.2)             # Set to a value\ngauge.inc(5)                # Increase by 5\ngauge.dec(3)                # Decrease by 3\nhistogram.observe(0.25)     # Observe a value\nsummary.observe(1024)       # Observe a value\n\n# Get metrics in Prometheus text format\nputs Prometheus.collect\n```\n\n## Demo\n\nCheck out the [demo application](examples/demo.cr) that showcases all metric types:\n\n```crystal\ncrystal examples/demo.cr\n```\n\nThe demo simulates HTTP traffic and demonstrates:\n\n- Counters tracking requests with labels\n- Gauges monitoring memory usage\n- Histograms measuring response time distributions\n- Summaries capturing request size statistics\n\n## Metric Types\n\n### Counter\n\nA counter is a cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero.\n\n```crystal\ncounter = Prometheus.counter(\"http_requests_total\", \"Total HTTP requests\")\ncounter.inc      # Increment by 1\ncounter.inc(5)   # Increment by 5\n```\n\n### Gauge\n\nA gauge is a metric that represents a single numerical value that can arbitrarily go up and down.\n\n```crystal\ngauge = Prometheus.gauge(\"cpu_usage\", \"CPU usage percentage\")\ngauge.set(45.2)  # Set to 45.2\ngauge.inc(5)     # Increase by 5\ngauge.dec(3)     # Decrease by 3\n```\n\n### Histogram\n\nA histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets.\n\n```crystal\n# Create with custom buckets\nhistogram = Prometheus.histogram(\n  \"response_time\",\n  \"Response time in seconds\",\n  [0.1, 0.5, 1.0, 2.0, 5.0]\n)\n\n# Observe values\nhistogram.observe(0.25)\n```\n\n### Summary\n\nA summary captures individual observations from an event or sample stream and summarizes them in a traditional way, with count and sum.\n\n```crystal\nsummary = Prometheus.summary(\"request_size\", \"Request size in bytes\")\nsummary.observe(1024)\n```\n\n## Labels\n\nLabels enable Prometheus's dimensional data model. A label set can be attached to any metric:\n\n```crystal\n# Create a label set\nlabels = Prometheus::LabelSet.new({\n  \"method\" => \"GET\",\n  \"path\" => \"/api/users\"\n})\n\n# Create metric with labels\nrequests = Prometheus.counter(\"http_requests_total\", \"Total HTTP requests\", labels)\nrequests.inc\n\n# Output will include labels:\n# http_requests_total{method=\"GET\",path=\"/api/users\"} 1\n```\n\n## Registry\n\nThe library maintains a default registry that manages all metrics. You can access it directly if needed:\n\n```crystal\n# Register a metric manually\nPrometheus.register(metric)\n\n# Unregister a metric\nPrometheus.unregister(\"metric_name\")\n\n# Clear all metrics\nPrometheus.clear\n\n# Get all metrics in Prometheus text format\noutput = Prometheus.collect\n```\n\n## Thread Safety\n\nAll metric operations are thread-safe. The library uses mutexes to ensure proper synchronization in concurrent environments.\n\n## Development\n\nRun tests:\n\n```crystal\ncrystal spec\n```\n\n## Contributing\n\n1. Fork it (<https://github.com/pfeifferj/prometheus/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n## License\n\nThis project is licensed under the MIT License - see the LICENSE file for details.\n","program":{"html_id":"prometheus/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"prometheus","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"prometheus/Prometheus","path":"Prometheus.html","kind":"module","full_name":"Prometheus","name":"Prometheus","abstract":false,"locations":[{"filename":"src/metrics.cr","line_number":4,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L4"},{"filename":"src/prometheus.cr","line_number":33,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/prometheus.cr#L33"},{"filename":"src/registry.cr","line_number":4,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/registry.cr#L4"},{"filename":"src/types.cr","line_number":2,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L2"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.1.0\""}],"doc":"A Crystal client library for Prometheus monitoring system.\n\nThis library provides a complete implementation of Prometheus client library guidelines,\nincluding support for all metric types (Counter, Gauge, Histogram, Summary),\nlabel sets, and thread-safe operations.\n\n## Basic Usage\n\n```crystal\n# Create metrics\ncounter = Prometheus.counter(\"http_requests_total\", \"Total HTTP requests\")\ngauge = Prometheus.gauge(\"cpu_usage\", \"CPU usage percentage\")\nhistogram = Prometheus.histogram(\"response_time\", \"Response time in seconds\", [0.1, 0.5, 1.0])\nsummary = Prometheus.summary(\"request_size\", \"Request size in bytes\")\n\n# Add labels\nlabels = Prometheus::LabelSet.new({\"method\" => \"GET\", \"path\" => \"/api\"})\nrequests = Prometheus.counter(\"http_requests_total\", \"Total HTTP requests\", labels)\n\n# Use metrics\ncounter.inc\ngauge.set(45.2)\nhistogram.observe(0.25)\nsummary.observe(1024)\n\n# Get metrics in Prometheus text format\nputs Prometheus.collect\n```","summary":"<p>A Crystal client library for Prometheus monitoring system.</p>","class_methods":[{"html_id":"clear-class-method","name":"clear","abstract":false,"location":{"filename":"src/prometheus.cr","line_number":60,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/prometheus.cr#L60"},"def":{"name":"clear","visibility":"Public","body":"Registry.default.clear"}},{"html_id":"collect:String-class-method","name":"collect","abstract":false,"location":{"filename":"src/prometheus.cr","line_number":64,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/prometheus.cr#L64"},"def":{"name":"collect","return_type":"String","visibility":"Public","body":"Registry.default.collect"}},{"html_id":"counter(name:String,help:String,labels=LabelSet.new):Counter-class-method","name":"counter","doc":"Creates and registers a new Gauge metric.\n\nA Gauge is a metric that represents a single numerical value that can arbitrarily go up and down.\n\n```crystal\ngauge = Prometheus.gauge(\"cpu_usage\", \"CPU usage percentage\")\ngauge.set(45.2)  # Set to 45.2\ngauge.inc(5)     # Increase by 5\ngauge.dec(3)     # Decrease by 3\n```\n\nParameters:\n* name : The name of the gauge metric\n* help : Help text describing the metric\n* labels : Optional LabelSet for dimensional data","summary":"<p>Creates and registers a new Gauge metric.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"args_string":"(name : String, help : String, labels = LabelSet.new) : Counter","args_html":"(name : String, help : String, labels = <span class=\"t\">LabelSet</span>.new) : <a href=\"Prometheus/Counter.html\">Counter</a>","location":{"filename":"src/prometheus.cr","line_number":83,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/prometheus.cr#L83"},"def":{"name":"counter","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"return_type":"Counter","visibility":"Public","body":"counter = Counter.new(name, help, labels)\nregister(counter)\ncounter\n"}},{"html_id":"gauge(name:String,help:String,labels=LabelSet.new):Gauge-class-method","name":"gauge","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"args_string":"(name : String, help : String, labels = LabelSet.new) : Gauge","args_html":"(name : String, help : String, labels = <span class=\"t\">LabelSet</span>.new) : <a href=\"Prometheus/Gauge.html\">Gauge</a>","location":{"filename":"src/prometheus.cr","line_number":89,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/prometheus.cr#L89"},"def":{"name":"gauge","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"return_type":"Gauge","visibility":"Public","body":"gauge = Gauge.new(name, help, labels)\nregister(gauge)\ngauge\n"}},{"html_id":"histogram(name:String,help:String,buckets:Array(Float64),labels=LabelSet.new):Histogram-class-method","name":"histogram","doc":"Creates and registers a new Histogram metric.\n\nA Histogram samples observations (usually things like request durations or response sizes)\nand counts them in configurable buckets.\n\n```crystal\nhistogram = Prometheus.histogram(\n  \"response_time\",\n  \"Response time in seconds\",\n  [0.1, 0.5, 1.0, 2.0, 5.0]\n)\nhistogram.observe(0.25)\n```\n\nParameters:\n* name : The name of the histogram metric\n* help : Help text describing the metric\n* buckets : Array of upper bounds for histogram buckets\n* labels : Optional LabelSet for dimensional data","summary":"<p>Creates and registers a new Histogram metric.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"buckets","external_name":"buckets","restriction":"Array(Float64)"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"args_string":"(name : String, help : String, buckets : Array(Float64), labels = LabelSet.new) : Histogram","args_html":"(name : String, help : String, buckets : Array(Float64), labels = <span class=\"t\">LabelSet</span>.new) : <a href=\"Prometheus/Histogram.html\">Histogram</a>","location":{"filename":"src/prometheus.cr","line_number":114,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/prometheus.cr#L114"},"def":{"name":"histogram","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"buckets","external_name":"buckets","restriction":"Array(Float64)"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"return_type":"Histogram","visibility":"Public","body":"histogram = Histogram.new(name, help, buckets, labels)\nregister(histogram)\nhistogram\n"}},{"html_id":"register(metric:Metric)-class-method","name":"register","doc":"Creates and registers a new Counter metric.\n\nA Counter is a cumulative metric that represents a single monotonically increasing counter\nwhose value can only increase or be reset to zero.\n\n```crystal\ncounter = Prometheus.counter(\"http_requests_total\", \"Total HTTP requests\")\ncounter.inc      # Increment by 1\ncounter.inc(5)   # Increment by 5\n```\n\nParameters:\n* name : The name of the counter metric\n* help : Help text describing the metric\n* labels : Optional LabelSet for dimensional data","summary":"<p>Creates and registers a new Counter metric.</p>","abstract":false,"args":[{"name":"metric","external_name":"metric","restriction":"Metric"}],"args_string":"(metric : Metric)","args_html":"(metric : <a href=\"Prometheus/Metric.html\">Metric</a>)","location":{"filename":"src/prometheus.cr","line_number":52,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/prometheus.cr#L52"},"def":{"name":"register","args":[{"name":"metric","external_name":"metric","restriction":"Metric"}],"visibility":"Public","body":"Registry.default.register(metric)"}},{"html_id":"summary(name:String,help:String,labels=LabelSet.new):Summary-class-method","name":"summary","doc":"Creates and registers a new Summary metric.\n\nA Summary captures individual observations from an event or sample stream\nand summarizes them in a traditional way, with count and sum.\n\n```crystal\nsummary = Prometheus.summary(\"request_size\", \"Request size in bytes\")\nsummary.observe(1024)\n```\n\nParameters:\n* name : The name of the summary metric\n* help : Help text describing the metric\n* labels : Optional LabelSet for dimensional data","summary":"<p>Creates and registers a new Summary metric.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"args_string":"(name : String, help : String, labels = LabelSet.new) : Summary","args_html":"(name : String, help : String, labels = <span class=\"t\">LabelSet</span>.new) : <a href=\"Prometheus/Summary.html\">Summary</a>","location":{"filename":"src/prometheus.cr","line_number":134,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/prometheus.cr#L134"},"def":{"name":"summary","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"return_type":"Summary","visibility":"Public","body":"summary = Summary.new(name, help, labels)\nregister(summary)\nsummary\n"}},{"html_id":"unregister(name:String)-class-method","name":"unregister","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String)","args_html":"(name : String)","location":{"filename":"src/prometheus.cr","line_number":56,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/prometheus.cr#L56"},"def":{"name":"unregister","args":[{"name":"name","external_name":"name","restriction":"String"}],"visibility":"Public","body":"Registry.default.unregister(name)"}}],"types":[{"html_id":"prometheus/Prometheus/Counter","path":"Prometheus/Counter.html","kind":"class","full_name":"Prometheus::Counter","name":"Counter","abstract":false,"superclass":{"html_id":"prometheus/Prometheus/Metric","kind":"class","full_name":"Prometheus::Metric","name":"Metric"},"ancestors":[{"html_id":"prometheus/Prometheus/Metric","kind":"class","full_name":"Prometheus::Metric","name":"Metric"},{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"prometheus/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/metrics.cr","line_number":21,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L21"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"prometheus/Prometheus","kind":"module","full_name":"Prometheus","name":"Prometheus"},"doc":"A Counter is a cumulative metric that represents a single monotonically increasing counter\nwhose value can only increase or be reset to zero.\n\nUse a Counter for metrics that accumulate values, such as:\n* Number of requests served\n* Number of tasks completed\n* Number of errors\n\nExample:\n```crystal\ncounter = Counter.new(\"http_requests_total\", \"Total HTTP requests\")\ncounter.inc      # Increment by 1\ncounter.inc(5)   # Increment by 5\n```\n\nNOTE: Counter values cannot decrease. Use a Gauge for values that can go up and down.","summary":"<p>A Counter is a cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero.</p>","instance_methods":[{"html_id":"collect:Array(Sample)-instance-method","name":"collect","abstract":false,"location":{"filename":"src/metrics.cr","line_number":40,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L40"},"def":{"name":"collect","return_type":"Array(Sample)","visibility":"Public","body":"[Sample.new(@name, @labels, value)]"}},{"html_id":"inc(value:Number=1)-instance-method","name":"inc","abstract":false,"args":[{"name":"value","default_value":"1","external_name":"value","restriction":"Number"}],"args_string":"(value : Number = 1)","args_html":"(value : Number = <span class=\"n\">1</span>)","location":{"filename":"src/metrics.cr","line_number":29,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L29"},"def":{"name":"inc","args":[{"name":"value","default_value":"1","external_name":"value","restriction":"Number"}],"visibility":"Public","body":"if value < 0\n  raise(ArgumentError.new(\"Counter increment must be positive\"))\nend\n@mutex.synchronize do\n  @value = @value + value.to_f64\nend\n"}},{"html_id":"type:String-instance-method","name":"type","abstract":false,"location":{"filename":"src/metrics.cr","line_number":25,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L25"},"def":{"name":"type","return_type":"String","visibility":"Public","body":"\"counter\""}},{"html_id":"value:Float64-instance-method","name":"value","abstract":false,"location":{"filename":"src/metrics.cr","line_number":36,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L36"},"def":{"name":"value","return_type":"Float64","visibility":"Public","body":"@mutex.synchronize do\n  @value\nend"}}]},{"html_id":"prometheus/Prometheus/Gauge","path":"Prometheus/Gauge.html","kind":"class","full_name":"Prometheus::Gauge","name":"Gauge","abstract":false,"superclass":{"html_id":"prometheus/Prometheus/Metric","kind":"class","full_name":"Prometheus::Metric","name":"Metric"},"ancestors":[{"html_id":"prometheus/Prometheus/Metric","kind":"class","full_name":"Prometheus::Metric","name":"Metric"},{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"prometheus/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/metrics.cr","line_number":59,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L59"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"prometheus/Prometheus","kind":"module","full_name":"Prometheus","name":"Prometheus"},"doc":"A Gauge is a metric that represents a single numerical value that can arbitrarily go up and down.\n\nUse a Gauge for metrics that can increase and decrease, such as:\n* Current memory usage\n* Number of items in a queue\n* Number of active connections\n\nExample:\n```crystal\ngauge = Gauge.new(\"cpu_usage\", \"CPU usage percentage\")\ngauge.set(45.2)  # Set to specific value\ngauge.inc(5)     # Increase by 5\ngauge.dec(3)     # Decrease by 3\n```","summary":"<p>A Gauge is a metric that represents a single numerical value that can arbitrarily go up and down.</p>","instance_methods":[{"html_id":"collect:Array(Sample)-instance-method","name":"collect","abstract":false,"location":{"filename":"src/metrics.cr","line_number":89,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L89"},"def":{"name":"collect","return_type":"Array(Sample)","visibility":"Public","body":"[Sample.new(@name, @labels, value)]"}},{"html_id":"dec(value:Number=1)-instance-method","name":"dec","abstract":false,"args":[{"name":"value","default_value":"1","external_name":"value","restriction":"Number"}],"args_string":"(value : Number = 1)","args_html":"(value : Number = <span class=\"n\">1</span>)","location":{"filename":"src/metrics.cr","line_number":79,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L79"},"def":{"name":"dec","args":[{"name":"value","default_value":"1","external_name":"value","restriction":"Number"}],"visibility":"Public","body":"@mutex.synchronize do\n  @value = @value - value.to_f64\nend"}},{"html_id":"inc(value:Number=1)-instance-method","name":"inc","abstract":false,"args":[{"name":"value","default_value":"1","external_name":"value","restriction":"Number"}],"args_string":"(value : Number = 1)","args_html":"(value : Number = <span class=\"n\">1</span>)","location":{"filename":"src/metrics.cr","line_number":73,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L73"},"def":{"name":"inc","args":[{"name":"value","default_value":"1","external_name":"value","restriction":"Number"}],"visibility":"Public","body":"@mutex.synchronize do\n  @value = @value + value.to_f64\nend"}},{"html_id":"set(value:Number)-instance-method","name":"set","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Number"}],"args_string":"(value : Number)","args_html":"(value : Number)","location":{"filename":"src/metrics.cr","line_number":67,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L67"},"def":{"name":"set","args":[{"name":"value","external_name":"value","restriction":"Number"}],"visibility":"Public","body":"@mutex.synchronize do\n  @value = value.to_f64\nend"}},{"html_id":"type:String-instance-method","name":"type","abstract":false,"location":{"filename":"src/metrics.cr","line_number":63,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L63"},"def":{"name":"type","return_type":"String","visibility":"Public","body":"\"gauge\""}},{"html_id":"value:Float64-instance-method","name":"value","abstract":false,"location":{"filename":"src/metrics.cr","line_number":85,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L85"},"def":{"name":"value","return_type":"Float64","visibility":"Public","body":"@mutex.synchronize do\n  @value\nend"}}]},{"html_id":"prometheus/Prometheus/Histogram","path":"Prometheus/Histogram.html","kind":"class","full_name":"Prometheus::Histogram","name":"Histogram","abstract":false,"superclass":{"html_id":"prometheus/Prometheus/Metric","kind":"class","full_name":"Prometheus::Metric","name":"Metric"},"ancestors":[{"html_id":"prometheus/Prometheus/Metric","kind":"class","full_name":"Prometheus::Metric","name":"Metric"},{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"prometheus/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/metrics.cr","line_number":119,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L119"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"prometheus/Prometheus","kind":"module","full_name":"Prometheus","name":"Prometheus"},"doc":"A Histogram samples observations (usually things like request durations or response sizes)\nand counts them in configurable buckets.\n\nUse a Histogram to track size distributions, such as:\n* Request duration\n* Response sizes\n* Queue length variations\n\nExample:\n```crystal\n# Create with custom buckets\nhistogram = Histogram.new(\n  \"response_time\",\n  \"Response time in seconds\",\n  [0.1, 0.5, 1.0, 2.0, 5.0]\n)\n\n# Observe values\nhistogram.observe(0.25)\n```\n\nHistograms track:\n* Count per bucket (number of values <= bucket upper bound)\n* Total sum of all observed values\n* Count of all observed values","summary":"<p>A Histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets.</p>","constructors":[{"html_id":"new(name:String,help:String,buckets:Array(Float64),labels=LabelSet.new)-class-method","name":"new","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"buckets","external_name":"buckets","restriction":"Array(Float64)"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"args_string":"(name : String, help : String, buckets : Array(Float64), labels = LabelSet.new)","args_html":"(name : String, help : String, buckets : Array(Float64), labels = <span class=\"t\">LabelSet</span>.new)","location":{"filename":"src/metrics.cr","line_number":125,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L125"},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"buckets","external_name":"buckets","restriction":"Array(Float64)"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(name, help, buckets, labels)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"collect:Array(Sample)-instance-method","name":"collect","abstract":false,"location":{"filename":"src/metrics.cr","line_number":149,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L149"},"def":{"name":"collect","return_type":"Array(Sample)","visibility":"Public","body":"@mutex.synchronize do\n  samples = [] of Sample\n  @buckets.each do |upper_bound, count|\n    bucket_label = @labels.merge(LabelSet.new({\"le\" => upper_bound.to_s}))\n    samples << (Sample.new(\"#{@name}_bucket\", bucket_label, count.to_f64))\n  end\n  inf_label = @labels.merge(LabelSet.new({\"le\" => \"+Inf\"}))\n  samples << (Sample.new(\"#{@name}_bucket\", inf_label, @count.to_f64))\n  samples << (Sample.new(\"#{@name}_sum\", @labels, @sum))\n  samples << (Sample.new(\"#{@name}_count\", @labels, @count.to_f64))\n  samples\nend"}},{"html_id":"observe(value:Number)-instance-method","name":"observe","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Number"}],"args_string":"(value : Number)","args_html":"(value : Number)","location":{"filename":"src/metrics.cr","line_number":135,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L135"},"def":{"name":"observe","args":[{"name":"value","external_name":"value","restriction":"Number"}],"visibility":"Public","body":"value_f64 = value.to_f64\n@mutex.synchronize do\n  @sum = @sum + value_f64\n  @count = @count + 1\n  @buckets.each do |upper_bound, _|\n    if value_f64 <= upper_bound\n      __temp_49 = upper_bound\n      @buckets[__temp_49] = @buckets[__temp_49] + 1\n    end\n  end\nend\n"}},{"html_id":"type:String-instance-method","name":"type","abstract":false,"location":{"filename":"src/metrics.cr","line_number":131,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L131"},"def":{"name":"type","return_type":"String","visibility":"Public","body":"\"histogram\""}}]},{"html_id":"prometheus/Prometheus/Label","path":"Prometheus/Label.html","kind":"class","full_name":"Prometheus::Label","name":"Label","abstract":false,"superclass":{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"prometheus/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/types.cr","line_number":14,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L14"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"prometheus/Prometheus","kind":"module","full_name":"Prometheus","name":"Prometheus"},"doc":"A Label represents a key-value pair used to identify a metric.\n\nLabels are used to distinguish different dimensions of a metric. For example,\nan HTTP request counter might have labels for the method and path.\n\n```crystal\nlabel = Label.new(\"method\", \"GET\")\n```\n\nLabel names must match the regex `[a-zA-Z_][a-zA-Z0-9_]*` and cannot be empty.\nLabel values cannot be empty.","summary":"<p>A Label represents a key-value pair used to identify a metric.</p>","constructors":[{"html_id":"new(name:String,value:String)-class-method","name":"new","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"args_string":"(name : String, value : String)","args_html":"(name : String, value : String)","location":{"filename":"src/types.cr","line_number":18,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L18"},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(name, value)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"name:String-instance-method","name":"name","abstract":false,"location":{"filename":"src/types.cr","line_number":15,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L15"},"def":{"name":"name","return_type":"String","visibility":"Public","body":"@name"}},{"html_id":"value:String-instance-method","name":"value","abstract":false,"location":{"filename":"src/types.cr","line_number":16,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L16"},"def":{"name":"value","return_type":"String","visibility":"Public","body":"@value"}}]},{"html_id":"prometheus/Prometheus/LabelSet","path":"Prometheus/LabelSet.html","kind":"class","full_name":"Prometheus::LabelSet","name":"LabelSet","abstract":false,"superclass":{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"prometheus/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/types.cr","line_number":52,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L52"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"prometheus/Prometheus","kind":"module","full_name":"Prometheus","name":"Prometheus"},"doc":"LabelSet represents a collection of labels that uniquely identify a metric.\n\nA LabelSet is used to attach multiple labels to a metric, enabling Prometheus's\ndimensional data model.\n\n```crystal\nlabels = LabelSet.new({\n  \"method\" => \"GET\",\n  \"path\" => \"/api/users\"\n})\n```\n\nLabelSets can be merged to combine labels from different sources:\n\n```crystal\nbase_labels = LabelSet.new({\"service\" => \"web\"})\nrequest_labels = LabelSet.new({\"method\" => \"GET\"})\ncombined = base_labels.merge(request_labels)\n```","summary":"<p>LabelSet represents a collection of labels that uniquely identify a metric.</p>","constructors":[{"html_id":"new(labels:Hash(String,String)=Hash(String,String).new)-class-method","name":"new","abstract":false,"args":[{"name":"labels","default_value":"Hash(String, String).new","external_name":"labels","restriction":"::Hash(::String, ::String)"}],"args_string":"(labels : Hash(String, String) = Hash(String, String).new)","args_html":"(labels : Hash(String, String) = <span class=\"t\">Hash</span>(<span class=\"t\">String</span>, <span class=\"t\">String</span>).new)","location":{"filename":"src/types.cr","line_number":55,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L55"},"def":{"name":"new","args":[{"name":"labels","default_value":"Hash(String, String).new","external_name":"labels","restriction":"::Hash(::String, ::String)"}],"visibility":"Public","body":"_ = allocate\n_.initialize(labels)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add(name:String,value:String)-instance-method","name":"add","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"args_string":"(name : String, value : String)","args_html":"(name : String, value : String)","location":{"filename":"src/types.cr","line_number":58,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L58"},"def":{"name":"add","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"visibility":"Public","body":"@labels[name] = value"}},{"html_id":"labels:Hash(String,String)-instance-method","name":"labels","abstract":false,"location":{"filename":"src/types.cr","line_number":53,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L53"},"def":{"name":"labels","return_type":"Hash(String, String)","visibility":"Public","body":"@labels"}},{"html_id":"merge(other:LabelSet)-instance-method","name":"merge","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"LabelSet"}],"args_string":"(other : LabelSet)","args_html":"(other : <a href=\"../Prometheus/LabelSet.html\">LabelSet</a>)","location":{"filename":"src/types.cr","line_number":62,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L62"},"def":{"name":"merge","args":[{"name":"other","external_name":"other","restriction":"LabelSet"}],"visibility":"Public","body":"LabelSet.new(@labels.merge(other.labels))"}},{"html_id":"to_s(io:IO)-instance-method","name":"to_s","doc":"Appends a short String representation of this object\nwhich includes its class name and its object address.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).to_s # => #<Person:0x10a199f20>\n```","summary":"<p>Appends a short String representation of this object which includes its class name and its object address.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO)","args_html":"(io : IO)","location":{"filename":"src/types.cr","line_number":66,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L66"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"visibility":"Public","body":"if @labels.empty?\n  return\nend\nfirst = true\nio << \"{\"\n@labels.each do |name, value|\n  if first\n  else\n    io << \",\"\n  end\n  first = false\n  io << \"#{name}=\\\"#{value}\\\"\"\nend\nio << \"}\"\n"}}]},{"html_id":"prometheus/Prometheus/Metric","path":"Prometheus/Metric.html","kind":"class","full_name":"Prometheus::Metric","name":"Metric","abstract":true,"superclass":{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"prometheus/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/types.cr","line_number":88,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L88"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"prometheus/Prometheus/Counter","kind":"class","full_name":"Prometheus::Counter","name":"Counter"},{"html_id":"prometheus/Prometheus/Gauge","kind":"class","full_name":"Prometheus::Gauge","name":"Gauge"},{"html_id":"prometheus/Prometheus/Histogram","kind":"class","full_name":"Prometheus::Histogram","name":"Histogram"},{"html_id":"prometheus/Prometheus/Summary","kind":"class","full_name":"Prometheus::Summary","name":"Summary"}],"namespace":{"html_id":"prometheus/Prometheus","kind":"module","full_name":"Prometheus","name":"Prometheus"},"doc":"Base class for all metric types (Counter, Gauge, Histogram, Summary).\n\nThis abstract class defines the common interface and behavior for all metrics:\n* Each metric has a name, help text, and optional labels\n* Names must match the regex `[a-zA-Z_:][a-zA-Z0-9_:]*`\n* Each metric type must implement `type` and `collect` methods\n\nMetric implementations should be thread-safe and handle concurrent access appropriately.","summary":"<p>Base class for all metric types (Counter, Gauge, Histogram, Summary).</p>","constructors":[{"html_id":"new(name:String,help:String,labels:Prometheus::LabelSet=LabelSet.new)-class-method","name":"new","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":"::Prometheus::LabelSet"}],"args_string":"(name : String, help : String, labels : Prometheus::LabelSet = LabelSet.new)","args_html":"(name : String, help : String, labels : <a href=\"../Prometheus/LabelSet.html\">Prometheus::LabelSet</a> = <span class=\"t\">LabelSet</span>.new)","location":{"filename":"src/types.cr","line_number":93,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L93"},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":"::Prometheus::LabelSet"}],"visibility":"Public","body":"_ = allocate\n_.initialize(name, help, labels)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"collect:Array(Sample)-instance-method","name":"collect","abstract":true,"location":{"filename":"src/types.cr","line_number":103,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L103"},"def":{"name":"collect","return_type":"Array(Sample)","visibility":"Public","body":""}},{"html_id":"help:String-instance-method","name":"help","abstract":false,"location":{"filename":"src/types.cr","line_number":90,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L90"},"def":{"name":"help","return_type":"String","visibility":"Public","body":"@help"}},{"html_id":"labels:LabelSet-instance-method","name":"labels","abstract":false,"location":{"filename":"src/types.cr","line_number":91,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L91"},"def":{"name":"labels","return_type":"LabelSet","visibility":"Public","body":"@labels"}},{"html_id":"name:String-instance-method","name":"name","abstract":false,"location":{"filename":"src/types.cr","line_number":89,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L89"},"def":{"name":"name","return_type":"String","visibility":"Public","body":"@name"}},{"html_id":"type:String-instance-method","name":"type","abstract":true,"location":{"filename":"src/types.cr","line_number":102,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L102"},"def":{"name":"type","return_type":"String","visibility":"Public","body":""}}]},{"html_id":"prometheus/Prometheus/Registry","path":"Prometheus/Registry.html","kind":"class","full_name":"Prometheus::Registry","name":"Registry","abstract":false,"superclass":{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"prometheus/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/registry.cr","line_number":28,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/registry.cr#L28"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"prometheus/Prometheus","kind":"module","full_name":"Prometheus","name":"Prometheus"},"doc":"Registry stores and manages the collection of metrics.\n\nThe Registry is responsible for:\n* Storing metric instances\n* Ensuring metric names are unique\n* Collecting metrics in Prometheus text format\n\nA default registry is provided via `Prometheus.register`, but you can also create\nyour own registries if needed:\n\n```crystal\n# Using default registry\nPrometheus.register(metric)\noutput = Prometheus.collect\n\n# Using custom registry\nregistry = Registry.new\nregistry.register(metric)\noutput = registry.collect\n```\n\nThe registry ensures thread-safe access to metrics and provides proper\nsynchronization for concurrent operations.","summary":"<p>Registry stores and manages the collection of metrics.</p>","constructors":[{"html_id":"default:Registry-class-method","name":"default","doc":"Default global registry instance","summary":"<p>Default global registry instance</p>","abstract":false,"location":{"filename":"src/registry.cr","line_number":107,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/registry.cr#L107"},"def":{"name":"default","return_type":"Registry","visibility":"Public","body":"@@default"}}],"instance_methods":[{"html_id":"clear-instance-method","name":"clear","doc":"Removes all metrics from the registry.\n\n```crystal\nregistry.clear\n```","summary":"<p>Removes all metrics from the registry.</p>","abstract":false,"location":{"filename":"src/registry.cr","line_number":69,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/registry.cr#L69"},"def":{"name":"clear","visibility":"Public","body":"@mutex.synchronize do\n  @metrics.clear\nend"}},{"html_id":"collect:String-instance-method","name":"collect","doc":"Collects all registered metrics and returns them in Prometheus text format.\n\nThe output format follows the Prometheus exposition format:\n```text\n# HELP http_requests_total Total HTTP requests\n# TYPE http_requests_total counter\nhttp_requests_total{method=\"GET\"} 42\n```\n\n```crystal\noutput = registry.collect\nputs output\n```","summary":"<p>Collects all registered metrics and returns them in Prometheus text format.</p>","abstract":false,"location":{"filename":"src/registry.cr","line_number":88,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/registry.cr#L88"},"def":{"name":"collect","return_type":"String","visibility":"Public","body":"output = String.build do |io|\n  @mutex.synchronize do\n    @metrics.each do |_, metric|\n      ((((io << \"# HELP \") << metric.name) << \" \") << metric.help) << \"\\n\"\n      ((((io << \"# TYPE \") << metric.name) << \" \") << metric.type) << \"\\n\"\n      metric.collect.each do |sample|\n        (io << sample) << \"\\n\"\n      end\n    end\n  end\nend\noutput\n"}},{"html_id":"register(metric:Metric)-instance-method","name":"register","doc":"Registers a metric with this registry.\n\nEach metric name must be unique within a registry. Attempting to register\na metric with a name that's already in use will raise an ArgumentError.\n\n```crystal\ncounter = Counter.new(\"http_requests_total\", \"Total HTTP requests\")\nregistry.register(counter)\n```\n\nRaises:\n* ArgumentError if a metric with the same name is already registered","summary":"<p>Registers a metric with this registry.</p>","abstract":false,"args":[{"name":"metric","external_name":"metric","restriction":"Metric"}],"args_string":"(metric : Metric)","args_html":"(metric : <a href=\"../Prometheus/Metric.html\">Metric</a>)","location":{"filename":"src/registry.cr","line_number":44,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/registry.cr#L44"},"def":{"name":"register","args":[{"name":"metric","external_name":"metric","restriction":"Metric"}],"visibility":"Public","body":"@mutex.synchronize do\n  if @metrics[metric.name]?\n    raise(ArgumentError.new(\"Metric #{metric.name} already registered\"))\n  end\n  @metrics[metric.name] = metric\nend"}},{"html_id":"unregister(name:String)-instance-method","name":"unregister","doc":"Unregisters a metric by name.\n\n```crystal\nregistry.unregister(\"http_requests_total\")\n```","summary":"<p>Unregisters a metric by name.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String)","args_html":"(name : String)","location":{"filename":"src/registry.cr","line_number":58,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/registry.cr#L58"},"def":{"name":"unregister","args":[{"name":"name","external_name":"name","restriction":"String"}],"visibility":"Public","body":"@mutex.synchronize do\n  @metrics.delete(name)\nend"}}]},{"html_id":"prometheus/Prometheus/Sample","path":"Prometheus/Sample.html","kind":"class","full_name":"Prometheus::Sample","name":"Sample","abstract":false,"superclass":{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"prometheus/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/types.cr","line_number":122,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L122"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"prometheus/Prometheus","kind":"module","full_name":"Prometheus","name":"Prometheus"},"doc":"Represents a single sample value at a point in time.\n\nA Sample combines:\n* A metric name\n* A set of labels\n* A numeric value\n* An optional timestamp\n\nSamples are used to represent the actual data points collected by metrics.\nThe Sample format follows the Prometheus exposition format:\n\n```text\nmetric_name{label=\"value\"} 42\n# Or with timestamp:\nmetric_name{label=\"value\"} 42 1234567890\n```","summary":"<p>Represents a single sample value at a point in time.</p>","constructors":[{"html_id":"new(name:String,labels:LabelSet,value:Float64,timestamp:Int64|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"labels","external_name":"labels","restriction":"LabelSet"},{"name":"value","external_name":"value","restriction":"Float64"},{"name":"timestamp","default_value":"nil","external_name":"timestamp","restriction":"Int64 | ::Nil"}],"args_string":"(name : String, labels : LabelSet, value : Float64, timestamp : Int64 | Nil = nil)","args_html":"(name : String, labels : <a href=\"../Prometheus/LabelSet.html\">LabelSet</a>, value : Float64, timestamp : Int64 | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/types.cr","line_number":128,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L128"},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"labels","external_name":"labels","restriction":"LabelSet"},{"name":"value","external_name":"value","restriction":"Float64"},{"name":"timestamp","default_value":"nil","external_name":"timestamp","restriction":"Int64 | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(name, labels, value, timestamp)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"labels:LabelSet-instance-method","name":"labels","abstract":false,"location":{"filename":"src/types.cr","line_number":124,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L124"},"def":{"name":"labels","return_type":"LabelSet","visibility":"Public","body":"@labels"}},{"html_id":"name:String-instance-method","name":"name","abstract":false,"location":{"filename":"src/types.cr","line_number":123,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L123"},"def":{"name":"name","return_type":"String","visibility":"Public","body":"@name"}},{"html_id":"timestamp:Int64|Nil-instance-method","name":"timestamp","abstract":false,"location":{"filename":"src/types.cr","line_number":126,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L126"},"def":{"name":"timestamp","return_type":"Int64 | ::Nil","visibility":"Public","body":"@timestamp"}},{"html_id":"to_s(io:IO)-instance-method","name":"to_s","doc":"Appends a short String representation of this object\nwhich includes its class name and its object address.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).to_s # => #<Person:0x10a199f20>\n```","summary":"<p>Appends a short String representation of this object which includes its class name and its object address.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO)","args_html":"(io : IO)","location":{"filename":"src/types.cr","line_number":131,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L131"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"visibility":"Public","body":"io << @name\nio << @labels\nio << \" \"\nio << @value\nif timestamp = @timestamp\n  io << \" \"\n  io << timestamp\nend\n"}},{"html_id":"value:Float64-instance-method","name":"value","abstract":false,"location":{"filename":"src/types.cr","line_number":125,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/types.cr#L125"},"def":{"name":"value","return_type":"Float64","visibility":"Public","body":"@value"}}]},{"html_id":"prometheus/Prometheus/Summary","path":"Prometheus/Summary.html","kind":"class","full_name":"Prometheus::Summary","name":"Summary","abstract":false,"superclass":{"html_id":"prometheus/Prometheus/Metric","kind":"class","full_name":"Prometheus::Metric","name":"Metric"},"ancestors":[{"html_id":"prometheus/Prometheus/Metric","kind":"class","full_name":"Prometheus::Metric","name":"Metric"},{"html_id":"prometheus/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"prometheus/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/metrics.cr","line_number":189,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L189"}],"repository_name":"prometheus","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"prometheus/Prometheus","kind":"module","full_name":"Prometheus","name":"Prometheus"},"doc":"A Summary captures individual observations from an event or sample stream\nand summarizes them with count and sum.\n\nUse a Summary for metrics where you need the count and sum, such as:\n* Request latencies\n* Request sizes\n* Response sizes\n\nExample:\n```crystal\nsummary = Summary.new(\"request_size\", \"Request size in bytes\")\nsummary.observe(1024)\n```\n\nSummaries track:\n* Count of all observed values\n* Sum of all observed values","summary":"<p>A Summary captures individual observations from an event or sample stream and summarizes them with count and sum.</p>","constructors":[{"html_id":"new(name:String,help:String,labels=LabelSet.new)-class-method","name":"new","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"args_string":"(name : String, help : String, labels = LabelSet.new)","args_html":"(name : String, help : String, labels = <span class=\"t\">LabelSet</span>.new)","location":{"filename":"src/metrics.cr","line_number":194,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L194"},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"help","external_name":"help","restriction":"String"},{"name":"labels","default_value":"LabelSet.new","external_name":"labels","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(name, help, labels)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"collect:Array(Sample)-instance-method","name":"collect","abstract":false,"location":{"filename":"src/metrics.cr","line_number":209,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L209"},"def":{"name":"collect","return_type":"Array(Sample)","visibility":"Public","body":"@mutex.synchronize do\n  [Sample.new(\"#{@name}_sum\", @labels, @sum), Sample.new(\"#{@name}_count\", @labels, @count.to_f64)]\nend"}},{"html_id":"observe(value:Number)-instance-method","name":"observe","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Number"}],"args_string":"(value : Number)","args_html":"(value : Number)","location":{"filename":"src/metrics.cr","line_number":202,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L202"},"def":{"name":"observe","args":[{"name":"value","external_name":"value","restriction":"Number"}],"visibility":"Public","body":"@mutex.synchronize do\n  @count = @count + 1\n  @sum = @sum + value.to_f64\nend"}},{"html_id":"type:String-instance-method","name":"type","abstract":false,"location":{"filename":"src/metrics.cr","line_number":198,"url":"https://github.com/pfeifferj/crystal-promethus-client/blob/8c56316f222a2c3e607e55555fbbde743bac0369/src/metrics.cr#L198"},"def":{"name":"type","return_type":"String","visibility":"Public","body":"\"summary\""}}]}]}]}}